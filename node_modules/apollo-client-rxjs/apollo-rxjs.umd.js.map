{"version":3,"file":"apollo-rxjs.umd.js","sources":["../src/utils/ObservableQueryRef.js","../src/RxObservableQuery.js","../src/utils/helpers.js","../src/utils/variables.js","../src/RxApolloClient.js","../src/rxify.js"],"sourcesContent":["var ObservableQueryRef = (function () {\n    function ObservableQueryRef(ref) {\n        if (ref) {\n            this.setRef(ref);\n        }\n    }\n    ObservableQueryRef.prototype.setRef = function (ref) {\n        this.ref = ref;\n    };\n    ObservableQueryRef.prototype.getRef = function () {\n        return this.ref;\n    };\n    return ObservableQueryRef;\n}());\nexport { ObservableQueryRef };\n//# sourceMappingURL=ObservableQueryRef.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Observable } from 'rxjs/Observable';\nimport { $$observable } from 'rxjs/symbol/observable';\nimport { ObservableQueryRef } from './utils/ObservableQueryRef';\nvar RxObservableQuery = (function (_super) {\n    __extends(RxObservableQuery, _super);\n    function RxObservableQuery(apollo, subscribe) {\n        var _this = _super.call(this, null) || this;\n        _this.apollo = apollo;\n        if (subscribe) {\n            _this._subscribe = subscribe;\n        }\n        return _this;\n    }\n    RxObservableQuery.prototype.lift = function (operator) {\n        var observable = new RxObservableQuery(this.apollo);\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    RxObservableQuery.prototype.refetch = function (variables) {\n        return this.getObservableQuery().refetch(variables);\n    };\n    RxObservableQuery.prototype.stopPolling = function () {\n        return this.getObservableQuery().stopPolling();\n    };\n    RxObservableQuery.prototype.startPolling = function (p) {\n        return this.getObservableQuery().startPolling(p);\n    };\n    RxObservableQuery.prototype.fetchMore = function (options) {\n        return this.getObservableQuery().fetchMore(options);\n    };\n    RxObservableQuery.prototype.updateQuery = function (mapFn) {\n        this.getObservableQuery().updateQuery(mapFn);\n    };\n    RxObservableQuery.prototype.subscribeToMore = function (options) {\n        return this.getObservableQuery().subscribeToMore(options);\n    };\n    RxObservableQuery.prototype.result = function () {\n        return this.getObservableQuery().result();\n    };\n    RxObservableQuery.prototype.currentResult = function () {\n        return this.getObservableQuery().currentResult();\n    };\n    Object.defineProperty(RxObservableQuery.prototype, \"variables\", {\n        get: function () {\n            return this.getObservableQuery().variables;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RxObservableQuery.prototype.setOptions = function (opts) {\n        return this.getObservableQuery().setOptions(opts);\n    };\n    RxObservableQuery.prototype.setVariables = function (variables, tryFetch) {\n        if (tryFetch === void 0) { tryFetch = false; }\n        return this.getObservableQuery().setVariables(variables, tryFetch);\n    };\n    RxObservableQuery.prototype._subscribe = function (subscriber) {\n        if (this.source) {\n            return this.source['_subscribe'](subscriber);\n        }\n        var obs = this.getObservableQuery();\n        return obs[$$observable]().subscribe(subscriber);\n    };\n    RxObservableQuery.prototype.getObservableQuery = function () {\n        if (this.apollo instanceof ObservableQueryRef) {\n            var ref = this.apollo;\n            return ref.getRef();\n        }\n        return this.apollo;\n    };\n    return RxObservableQuery;\n}(Observable));\nexport { RxObservableQuery };\n//# sourceMappingURL=RxObservableQuery.js.map","export function isObject(value) {\n    var type = typeof value;\n    return value !== null && (type === 'object' || type === 'function');\n}\nexport function omit(source) {\n    var fields = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        fields[_i - 1] = arguments[_i];\n    }\n    var result = {};\n    if (isObject(source)) {\n        result = Object.assign(result, source);\n        fields.forEach(function (field) { return delete result[field]; });\n    }\n    return result;\n}\n//# sourceMappingURL=helpers.js.map","import { Observable } from 'rxjs/Observable';\nimport { switchMap } from 'rxjs/operator/switchMap';\nimport { combineLatest } from 'rxjs/observable/combineLatest';\nimport { omit } from './helpers';\nimport { ObservableQueryRef } from './ObservableQueryRef';\nimport { RxObservableQuery } from '../RxObservableQuery';\nexport function createWithObservableVariables(options, mapFn) {\n    var observableQueryRef = new ObservableQueryRef();\n    var varObs = observeVariables(options.variables);\n    return new RxObservableQuery(observableQueryRef, function (subscriber) {\n        var sub = switchMap.call(varObs, (function (newVariables) {\n            var cleanOptions = omit(options, 'variables');\n            var newOptions = Object.assign(cleanOptions, { variables: newVariables });\n            observableQueryRef.setRef(mapFn(newOptions));\n            return observableQueryRef.getRef();\n        })).subscribe(subscriber);\n        return function () { return sub.unsubscribe(); };\n    });\n}\nexport function observeVariables(variables) {\n    var keys = Object.keys(variables);\n    return Observable.create(function (observer) {\n        combineLatest.call(undefined, mapVariablesToObservables(variables))\n            .subscribe(function (values) {\n            var resultVariables = {};\n            values.forEach(function (value, i) {\n                var key = keys[i];\n                resultVariables[key] = value;\n            });\n            observer.next(resultVariables);\n        });\n    });\n}\nfunction mapVariablesToObservables(variables) {\n    return Object.keys(variables)\n        .map(function (key) { return getVariableToObservable(variables[key]); });\n}\nfunction getVariableToObservable(variable) {\n    if (variable instanceof Observable) {\n        return variable;\n    }\n    else if (typeof variable !== 'undefined') {\n        return new Observable(function (subscriber) {\n            subscriber.next(variable);\n        });\n    }\n    else {\n        return new Observable(function (subscriber) {\n            subscriber.next(null);\n        });\n    }\n}\n//# sourceMappingURL=variables.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ApolloClient } from 'apollo-client';\nimport { RxObservableQuery } from './RxObservableQuery';\nimport { createWithObservableVariables } from './utils/variables';\nvar RxApolloClient = (function (_super) {\n    __extends(RxApolloClient, _super);\n    function RxApolloClient(options) {\n        return _super.call(this, options) || this;\n    }\n    RxApolloClient.prototype.watchQuery = function (options) {\n        if (typeof options.variables === 'object') {\n            return createWithObservableVariables(options, _super.prototype.watchQuery);\n        }\n        return new RxObservableQuery(_super.prototype.watchQuery.call(this, options));\n    };\n    return RxApolloClient;\n}(ApolloClient));\nexport { RxApolloClient };\n//# sourceMappingURL=RxApolloClient.js.map","import { ApolloClient } from 'apollo-client';\nimport { observeOn } from 'rxjs/operator/observeOn';\nimport { AsyncAction } from 'rxjs/scheduler/AsyncAction';\nimport { AsyncScheduler } from 'rxjs/scheduler/AsyncScheduler';\nimport { isObject } from './utils/helpers';\nimport { createWithObservableVariables } from './utils/variables';\nimport { RxObservableQuery } from './RxObservableQuery';\nexport function rxify(clientOrWatchQuery) {\n    if (clientOrWatchQuery instanceof ApolloClient) {\n        var savedWatchQuery_1 = clientOrWatchQuery.watchQuery;\n        clientOrWatchQuery.watchQuery = function (options) {\n            var _this = this;\n            return wrapWatchQuery(function (opts) { return savedWatchQuery_1.call(_this, opts); })(options);\n        }.bind(clientOrWatchQuery);\n        return clientOrWatchQuery;\n    }\n    if (isObject(clientOrWatchQuery)) {\n        return wrapWatchQuery(clientOrWatchQuery);\n    }\n    throw new Error('Use ApolloClient or a function that returns ObservableQuery');\n}\nfunction wrapAsync(obs) {\n    return observeOn.call(obs, new AsyncScheduler(AsyncAction));\n}\nfunction wrapWatchQuery(watchQuery) {\n    return function (options) {\n        if (typeof options.variables === 'object') {\n            return wrapAsync(createWithObservableVariables(options, function (newOptions) { return watchQuery(newOptions); }));\n        }\n        return wrapAsync(new RxObservableQuery(watchQuery(options)));\n    };\n}\n//# sourceMappingURL=rxify.js.map"],"names":["__extends","this","$$observable","Observable","switchMap","combineLatest","ApolloClient","observeOn","AsyncScheduler","AsyncAction"],"mappings":"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"}